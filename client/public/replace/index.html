<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Text-based RPG - Fantasy Sekai</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="game">
        <div id="stats">
            <span class="stat">XP : <b><span id="xpText">0</span></b></span>
            <span class="stat">HP : <b><span id="hpText">100</span></b></span>
            <span class="stat">Coin : <b><span id="coinText">50</span></b></span>
        </div>

        
        <div id="monsterStats">
            <span class="stat">Monster's Name : <b><span id="monsterName"></span></b>
            <span class="stat">Monster's HP : <b><span id="monsterHP"></span></b>
        </div>
        
        <div id="text">
            Welcome to Fantasy Sekai! Your task is to defeat the Demon Lord that resides in your world and 
            is disturbing the world's stability. You are currently at the middle of the 
            Town Square, where do you want to go?
        </div>
        <div id="controls">
            <button id="button1">Go to Merchant's District</button>
            <button id="button2">Go to Cave</button>
            <button id="button3">Fight Demon Lord</button>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- Place the code from the second HTML document here -->
    <script type="module">
      import { createPlayer, selectPlayer, updateGameInterface, savePlayers } from '/player.js';
      import { goToRoom, luckTest, pickItem, openChest, goLeft, goRight } from '/gameActions.js';
      import { updateSidebar, updateMainContent } from '/gameState.js';
      import { rooms } from '/rooms.js'
      import { StateManager } from '/shared/game/stateManager.mjs';
      
      // Initialize the game state
      window.stateManager = new StateManager(
        JSON.parse(localStorage.getItem('players')) || [],
        rooms,
        0,
        null,
      )

      const playerList = document.getElementById('player-list');
      const createPlayerButton = document.getElementById('create-player');
      let selectedPlayer = null;
  
      // Event listener for creating a new player
      createPlayerButton.addEventListener('click', () => {
        const newPlayerName = prompt('Enter a username for the new player:');
        if (newPlayerName) {
          createPlayer(newPlayerName);
        }
      });

      const goLeftButton = document.querySelector('#goLeftButton');
      const goRightButton = document.querySelector('#goRightButton');

      goLeftButton.addEventListener('click', goLeft)
      goRightButton.addEventListener('click', goRight)

    </script>
    <header>
        <h1>Welcome to Dungeon Adventure</h1>
    </header>
    <nav>
        <div class="player-selection">
        <h2>Select a Player or Create a New Player</h2>
        <ul id="player-list">
            <!-- Player buttons will be dynamically added here -->
        </ul>
        <button id="create-player">Create New Player</button>
    </div>
    <div class="game-interface">
        <!-- Game interface elements will be displayed here -->
    </div>
</nav>
<div class="sidebar">
    
</div>
<main>
    
        <h1>Dungeon Room</h1>
        <p>Welcome to the dark and mysterious dungeon room. You stand at a crossroads.</p>
        <p>Which way would you like to go?</p>
        <button id="goLeftButton">Go Left</button>
        <button id="goRightButton">Go Right</button>
    </main>
    <footer>
       
    </footer>
</body>

</html>

